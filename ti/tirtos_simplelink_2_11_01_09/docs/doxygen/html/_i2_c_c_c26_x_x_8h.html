<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>TI-RTOS for SimpleLink Wireless MCUs: I2CCC26XX.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">TI-RTOS for SimpleLink Wireless MCUs
   &#160;<span id="projectnumber">2.11.01.09</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_138732f2c96e3b0e8ad59009df8a8c23.html">tirtos_simplelink_2_11_01_09</a></li><li class="navelem"><a class="el" href="dir_d1669b12cbe61e7239e718aeb01e04a5.html">packages</a></li><li class="navelem"><a class="el" href="dir_2a65440169f69d0c886a4ed0b4f15986.html">ti</a></li><li class="navelem"><a class="el" href="dir_2054deab5a2f23ad8f1b385d1b72a49e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_4c0bb77e0e84c77a30bc5ffd8eeb46d3.html">i2c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">I2CCC26XX.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C driver implementation for a CC26XX I2C controller. </p>
<p>============================================================================</p>
<h1>Driver Include</h1>
<p>The I2C header file should be included in an application as follows: </p>
<div class="fragment"><div class="line">*  #include &lt;ti/drivers/I2C.h&gt;</div>
<div class="line">*  #include &lt;ti/drivers/i2c/I2CCC26XX.h&gt;</div>
<div class="line">*  </div>
</div><!-- fragment --><h1>Overview</h1>
<p>The general I2C API is normally used in application code, e.g. <a class="el" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e" title="Function to initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate. ">I2C_open()</a> is used instead of I2CCC26XX_open(). The board file will define the device specific config, and casting in the general API will ensure that the correct device specific functions are called. This is also reflected in the example code in <a class="el" href="_i2_c_c_c26_x_x_8h.html#I2C_USE_CASES">Use Cases</a>.</p>
<h2>General Behavior</h2>
<p>Before using the I2C in CC26XX:</p>
<ul>
<li>The I2C driver is initialized by calling <a class="el" href="_i2_c_8h.html#a9ff51ddf1d325776fef90cce0223772b" title="Function to initializes the I2C module. ">I2C_init()</a>.</li>
<li>The I2C HW is configured and flags system dependencies (e.g. IOs, power, etc.) by calling <a class="el" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e" title="Function to initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate. ">I2C_open()</a>.</li>
</ul>
<p>The following is true for receive operation:</p>
<ul>
<li>RX is enabled by calling <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a>. The readCount of the <a class="el" href="struct_i2_c___transaction.html" title="I2C transaction. ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>The following apply for transmit operation:</p>
<ul>
<li>TX is enabled by calling <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a>. The writeCount of the <a class="el" href="struct_i2_c___transaction.html" title="I2C transaction. ">I2C_Transaction</a> must be set to a non-zero value.</li>
<li>If the <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> succeeds, the I2C remains enabled.</li>
<li>The application must check the return value from <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> to verify that the transfer succeeded.</li>
</ul>
<p>After I2C operation has ended:</p>
<ul>
<li>Release system dependencies for I2C by calling <a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to closes a given I2C peripheral specified by the I2C handle. ">I2C_close()</a>.</li>
</ul>
<h2>Error handling</h2>
<p>If an error occurs during operation:</p>
<ul>
<li>The I2C Master transmits a stop bit and remains enabled.</li>
</ul>
<h2>Power Management</h2>
<p>The I2CCC26XX driver is setting a power constraint during operation to keep the device out of standby, i.e. device will enter idle mode when no tasks are active. When the operation has finished, the power constraint is released. The following statements are valid:</p>
<ul>
<li>After <a class="el" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e" title="Function to initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate. ">I2C_open()</a> call: I2C is enabled, there is no active I2C transactions, the device can enter standby.</li>
<li>After <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> call: active I2C transactions exist , the device might enter idle, not standby (set constraint).</li>
<li>If <a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> returns successfully or with error: I2C remains enabled, but device can enter standby.</li>
<li>After <a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to closes a given I2C peripheral specified by the I2C handle. ">I2C_close()</a> call: I2C is disabled</li>
</ul>
<h2>Supported Functions</h2>
<table class="doxtable">
<tr>
<th>Generic API Function </th><th>API Function </th><th>Description  </th></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#a9ff51ddf1d325776fef90cce0223772b" title="Function to initializes the I2C module. ">I2C_init()</a> </td><td>I2CCC26XX_init() </td><td>Initialize I2C driver </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e" title="Function to initialize a given I2C peripheral specified by the particular index value. The parameter specifies which mode the I2C will operate. ">I2C_open()</a> </td><td>I2CCC26XX_open() </td><td>Initialize I2C HW and set system dependencies </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#a12c86d89a687f2ee1eb980d99c32326d" title="Function to closes a given I2C peripheral specified by the I2C handle. ">I2C_close()</a> </td><td>I2CCC26XX_close() </td><td>Disable I2C HW and release system dependencies </td></tr>
<tr>
<td><a class="el" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7" title="Function that handles the I2C transfer for SYS/BIOS. ">I2C_transfer()</a> </td><td>I2CCC26XX_transfer() </td><td>Start I2C transfer </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>All calls should go through the generic API.</dd></dl>
<h2>Unsupported Functionality</h2>
<p>The CC26XX I2C driver currently does not support:</p>
<ul>
<li>Multi-master mode</li>
<li>I2C slave mode</li>
</ul>
<h2>Use Cases<a class="anchor" id="I2C_USE_CASES"></a></h2>
<h3>Basic Receive</h3>
<p>Receive 10 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26abe065350be2a0ae5c9beb24624626c75">I2C_MODE_BLOCKING</a>. </p>
<div class="fragment"><div class="line">*  <span class="comment">// Locals</span></div>
<div class="line">*  <a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle;</div>
<div class="line">*  <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div>
<div class="line">*  <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div>
<div class="line">*  uint8_t rxBuf[32];      <span class="comment">// Receive buffer</span></div>
<div class="line">*  uint8_t txBuf[32];      <span class="comment">// Transmit buffer</span></div>
<div class="line">*</div>
<div class="line">*  <span class="comment">// Configure I2C parameters.</span></div>
<div class="line">*  <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div>
<div class="line">*</div>
<div class="line">*  <span class="comment">// Initialize master I2C transaction structure</span></div>
<div class="line">*  i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 0;</div>
<div class="line">*  i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a15f82555a6dce6261cd89ed02aa72c25">writeBuf</a>     = txBuf;</div>
<div class="line">*  i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 10;</div>
<div class="line">*  i2cTrans.<a class="code" href="struct_i2_c___transaction.html#ad7b4bde147082e01263ab79bf391be66">readBuf</a>      = rxBuf;</div>
<div class="line">*  i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aaf0269d5c542d5636bdfd4e72eb4d08f">slaveAddress</a> = 0x3C;</div>
<div class="line">*</div>
<div class="line">*  <span class="comment">// Open I2C</span></div>
<div class="line">*  handle = <a class="code" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e">I2C_open</a>(Board_I2C, &amp;params);</div>
<div class="line">*</div>
<div class="line">*  <span class="comment">// Do I2C transfer receive</span></div>
<div class="line">*  <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div>
<div class="line">*  </div>
</div><!-- fragment --><h3>Basic Transmit</h3>
<p>Transmit 16 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p>
<div class="fragment"><div class="line">*  uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div>
<div class="line">*  uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div>
<div class="line">*  <span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div>
<div class="line">*</div>
<div class="line">*  <span class="keyword">static</span> <span class="keywordtype">void</span> transferCallback(<a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div>
<div class="line">*  {</div>
<div class="line">*      <span class="comment">// Set length bytes</span></div>
<div class="line">*      <span class="keywordflow">if</span> (result) {</div>
<div class="line">*          transferDone = <span class="keyword">true</span>;</div>
<div class="line">*      } <span class="keywordflow">else</span> {</div>
<div class="line">*          <span class="comment">// Transaction failed, act accordingly...</span></div>
<div class="line">*          .</div>
<div class="line">*          .</div>
<div class="line">*      }</div>
<div class="line">*  }</div>
<div class="line">*</div>
<div class="line">*  <span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(UArg a0, UArg a1)</div>
<div class="line">*  {</div>
<div class="line">*      <span class="comment">// Locals</span></div>
<div class="line">*      <a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle;</div>
<div class="line">*      <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div>
<div class="line">*      <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Configure I2C parameters.</span></div>
<div class="line">*      <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div>
<div class="line">*      params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div>
<div class="line">*      params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = transferCallback;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div>
<div class="line">*      <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div>
<div class="line">*          txBuffer[i] = (uint8_t) i;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Initialize master I2C transaction structure</span></div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 16;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a15f82555a6dce6261cd89ed02aa72c25">writeBuf</a>     = txBuffer;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#ad7b4bde147082e01263ab79bf391be66">readBuf</a>      = rxBuffer;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aaf0269d5c542d5636bdfd4e72eb4d08f">slaveAddress</a> = 0x3C;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Open I2C</span></div>
<div class="line">*      handle = <a class="code" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e">I2C_open</a>(Board_I2C, &amp;params);</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do I2C transfer (in callback mode)</span></div>
<div class="line">*      <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do other stuff while I2C is handling the transfer</span></div>
<div class="line">*      .</div>
<div class="line">*      .</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do something if I2C transfer is finished</span></div>
<div class="line">*      <span class="keywordflow">if</span>(transferDone) {</div>
<div class="line">*          .</div>
<div class="line">*          .</div>
<div class="line">*      }</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Continue...</span></div>
<div class="line">*      .</div>
<div class="line">*      .</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><h3>Chained Transactions</h3>
<p>Transmit 10 bytes and then 32 bytes over I2C in <a class="el" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>. </p>
<div class="fragment"><div class="line">*  uint8_t rxBuffer[32];            <span class="comment">// Receive buffer</span></div>
<div class="line">*  uint8_t txBuffer[32];            <span class="comment">// Transmit buffer</span></div>
<div class="line">*  uint8_t rxBuffer2[64];           <span class="comment">// 2. Receive buffer</span></div>
<div class="line">*  uint8_t txBuffer2[64];           <span class="comment">// 2. Transmit buffer</span></div>
<div class="line">*  <span class="keywordtype">bool</span> transferDone = <span class="keyword">false</span>;</div>
<div class="line">*</div>
<div class="line">*  <span class="keyword">static</span> <span class="keywordtype">void</span> writeCallbackDefault(<a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle, <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> *transac, <span class="keywordtype">bool</span> result)</div>
<div class="line">*  {</div>
<div class="line">*      <span class="comment">// Set length bytes</span></div>
<div class="line">*      <span class="keywordflow">if</span> (result) {</div>
<div class="line">*          transferDone = <span class="keyword">true</span>;</div>
<div class="line">*      } <span class="keywordflow">else</span> {</div>
<div class="line">*          <span class="comment">// Transaction failed, act accordingly...</span></div>
<div class="line">*          .</div>
<div class="line">*          .</div>
<div class="line">*      }</div>
<div class="line">*  }</div>
<div class="line">*</div>
<div class="line">*  <span class="keyword">static</span> <span class="keywordtype">void</span> taskFxn(UArg a0, UArg a1)</div>
<div class="line">*  {</div>
<div class="line">*      <span class="comment">// Locals</span></div>
<div class="line">*      <a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle;</div>
<div class="line">*      <a class="code" href="struct_i2_c___params.html">I2C_Params</a> params;</div>
<div class="line">*      <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans;</div>
<div class="line">*      <a class="code" href="struct_i2_c___transaction.html">I2C_Transaction</a> i2cTrans2;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Configure I2C parameters.</span></div>
<div class="line">*      <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;params);</div>
<div class="line">*      params.<a class="code" href="struct_i2_c___params.html#a79c5c51380ffbdb21df1dff6cb57de0e">transferMode</a> = <a class="code" href="_i2_c_8h.html#a39f3b9340fc4ee241b0d2da9b2841c26a129731a7edeb285f43a54b2cf9f5ac72">I2C_MODE_CALLBACK</a>;</div>
<div class="line">*      params.<a class="code" href="struct_i2_c___params.html#a57edf1b900368904779d0c57a73cf047">transferCallbackFxn</a> = writeCallbackDefault;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Prepare data to send, send 0x00, 0x01, 0x02, ...0xFF, 0x00, 0x01...</span></div>
<div class="line">*      <span class="keywordflow">for</span>(uint32_t i = 0; i &lt; numTxBytes; i++)</div>
<div class="line">*          txBuffer[i] = (uint8_t) i;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Initialize first master I2C transaction structure</span></div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 10;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a15f82555a6dce6261cd89ed02aa72c25">writeBuf</a>     = txBuffer;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#ad7b4bde147082e01263ab79bf391be66">readBuf</a>      = rxBuffer;</div>
<div class="line">*      i2cTrans.<a class="code" href="struct_i2_c___transaction.html#aaf0269d5c542d5636bdfd4e72eb4d08f">slaveAddress</a> = 0x3C;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Second transaction</span></div>
<div class="line">*      i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a08959a9f098163d02d6002e73b3a4606">writeCount</a>   = 32;</div>
<div class="line">*      i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a15f82555a6dce6261cd89ed02aa72c25">writeBuf</a>     = txBuffer2;</div>
<div class="line">*      i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#a2085d4c943f0d8617365b7c427e6a0de">readCount</a>    = 0;</div>
<div class="line">*      i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#ad7b4bde147082e01263ab79bf391be66">readBuf</a>      = rxBuffer2;</div>
<div class="line">*      i2cTrans2.<a class="code" href="struct_i2_c___transaction.html#aaf0269d5c542d5636bdfd4e72eb4d08f">slaveAddress</a> = 0x2E;</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Open I2C</span></div>
<div class="line">*      handle = <a class="code" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e">I2C_open</a>(Board_I2C, &amp;params);</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do chained I2C transfers (in callback mode).</span></div>
<div class="line">*      <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans);</div>
<div class="line">*      <a class="code" href="_i2_c_8h.html#ac5d827b67fe77d7d179026941cc069d7">I2C_transfer</a>(handle, &amp;i2cTrans2);</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do other stuff while I2C is handling the transfers</span></div>
<div class="line">*      .</div>
<div class="line">*      .</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Do something if I2C transfers are finished</span></div>
<div class="line">*      <span class="keywordflow">if</span>(transferDone) {</div>
<div class="line">*          .</div>
<div class="line">*          .</div>
<div class="line">*      }</div>
<div class="line">*</div>
<div class="line">*      <span class="comment">// Continue...</span></div>
<div class="line">*      .</div>
<div class="line">*      .</div>
<div class="line">*  }</div>
<div class="line">*  </div>
</div><!-- fragment --><h1>Instrumentation</h1>
<p>The I2C driver interface produces log statements if instrumentation is enabled.</p>
<table class="doxtable">
<tr>
<th>Diagnostics Mask </th><th>Log details  </th></tr>
<tr>
<td>Diags_USER1 </td><td>basic I2C operations performed </td></tr>
<tr>
<td>Diags_USER2 </td><td>detailed I2C operations performed </td></tr>
</table>
<hr/>
</div><div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="_i2_c_8h_source.html">ti/drivers/I2C.h</a>&gt;</code><br/>
<code>#include &lt;ti/sysbios/family/arm/cc26xx/Power.h&gt;</code><br/>
<code>#include &lt;ti/sysbios/family/arm/m3/Hwi.h&gt;</code><br/>
<code>#include &lt;ti/sysbios/knl/Semaphore.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for I2CCC26XX.h:</div>
<div class="dyncontent">
<div class="center"><img src="_i2_c_c_c26_x_x_8h__incl.png" border="0" usemap="#_i2_c_c_c26_x_x_8h" alt=""/></div>
<map name="_i2_c_c_c26_x_x_8h" id="_i2_c_c_c26_x_x_8h">
<area shape="rect" href="_i2_c_8h.html" title="I2C driver interface. " alt="" coords="160,90,266,114" /></map>
</div>
</div>
<p><a href="_i2_c_c_c26_x_x_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Pin Configuration.  <a href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html">I2CCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Hardware attributes.  <a href="struct_i2_c_c_c26_x_x___h_w_attrs.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c_c_c26_x_x___object.html">I2CCC26XX_Object</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Object.  <a href="struct_i2_c_c_c26_x_x___object.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaa17ecf48f5762e2e1bdb0bab8aacf0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#aaa17ecf48f5762e2e1bdb0bab8aacf0c">ti_sysbios_family_arm_m3_Hwi__nolocalnames</a></td></tr>
<tr class="separator:aaa17ecf48f5762e2e1bdb0bab8aacf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608c11d9086ef509bc173d18659f1014"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a608c11d9086ef509bc173d18659f1014">I2CCC26XX_CMD_UNDEFINED</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:a608c11d9086ef509bc173d18659f1014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa112ed4c00eb67f507b0ae891500b94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#afa112ed4c00eb67f507b0ae891500b94">I2CCC26XX_SUCCESS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:afa112ed4c00eb67f507b0ae891500b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addac2f61431f42ea2f6ad3af0b9b6c98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#addac2f61431f42ea2f6ad3af0b9b6c98">I2CCC26XX_ERROR</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:addac2f61431f42ea2f6ad3af0b9b6c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a6e087d828c4463de0061d8205b2245d8"><td class="memItemLeft" align="right" valign="top">typedef unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a6e087d828c4463de0061d8205b2245d8">I2CBaseAddrType</a></td></tr>
<tr class="separator:a6e087d828c4463de0061d8205b2245d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c119be60e1890af18565f27bbb8433a"><td class="memItemLeft" align="right" valign="top">typedef unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a5c119be60e1890af18565f27bbb8433a">I2CDataType</a></td></tr>
<tr class="separator:a5c119be60e1890af18565f27bbb8433a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92eeee6e19d215804204c4830a82d424"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a92eeee6e19d215804204c4830a82d424">I2CCC26XX_I2CPinCfg</a></td></tr>
<tr class="memdesc:a92eeee6e19d215804204c4830a82d424"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Pin Configuration.  <a href="#a92eeee6e19d215804204c4830a82d424">More...</a><br/></td></tr>
<tr class="separator:a92eeee6e19d215804204c4830a82d424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c00c0267b7eb96f1459bfb823bdd79"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html">I2CCC26XX_HWAttrs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#ab3c00c0267b7eb96f1459bfb823bdd79">I2CCC26XX_HWAttrs</a></td></tr>
<tr class="memdesc:ab3c00c0267b7eb96f1459bfb823bdd79"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Hardware attributes.  <a href="#ab3c00c0267b7eb96f1459bfb823bdd79">More...</a><br/></td></tr>
<tr class="separator:ab3c00c0267b7eb96f1459bfb823bdd79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb1b66d08f9584c404d1610f8282394"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___object.html">I2CCC26XX_Object</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a0eb1b66d08f9584c404d1610f8282394">I2CCC26XX_Object</a></td></tr>
<tr class="memdesc:a0eb1b66d08f9584c404d1610f8282394"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2CCC26XX Object.  <a href="#a0eb1b66d08f9584c404d1610f8282394">More...</a><br/></td></tr>
<tr class="separator:a0eb1b66d08f9584c404d1610f8282394"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6fb66ad0052e9ab9d1c1b65b8276fc61"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_i2_c___fxn_table.html">I2C_FxnTable</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i2_c_c_c26_x_x_8h.html#a6fb66ad0052e9ab9d1c1b65b8276fc61">I2CCC26XX_fxnTable</a></td></tr>
<tr class="separator:a6fb66ad0052e9ab9d1c1b65b8276fc61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aaa17ecf48f5762e2e1bdb0bab8aacf0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ti_sysbios_family_arm_m3_Hwi__nolocalnames</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a608c11d9086ef509bc173d18659f1014"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2CCC26XX_CMD_UNDEFINED&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return code when command is not defined. Currently in use by I2CCC26XX_control(). </p>

</div>
</div>
<a class="anchor" id="afa112ed4c00eb67f507b0ae891500b94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2CCC26XX_SUCCESS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Success Return Code </p>

</div>
</div>
<a class="anchor" id="addac2f61431f42ea2f6ad3af0b9b6c98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2CCC26XX_ERROR&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error Return Code </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a6e087d828c4463de0061d8205b2245d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned long <a class="el" href="_i2_c_c_c26_x_x_8h.html#a6e087d828c4463de0061d8205b2245d8">I2CBaseAddrType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>I2C Base Address type. </p>

</div>
</div>
<a class="anchor" id="a5c119be60e1890af18565f27bbb8433a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef unsigned long <a class="el" href="_i2_c_c_c26_x_x_8h.html#a5c119be60e1890af18565f27bbb8433a">I2CDataType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a92eeee6e19d215804204c4830a82d424"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a>  <a class="el" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2CCC26XX Pin Configuration. </p>
<p>Pin configuration that holds non-default pins. The default pin configuration is typically defined in <a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html" title="I2CCC26XX Hardware attributes. ">I2CCC26XX_HWAttrs</a> placed in the board file. The pin configuration structure is used by setting the custom void pointer in the <a class="el" href="struct_i2_c___params.html" title="I2C Parameters. ">I2C_Params</a> to point to this struct. If the custom void pointer is NULL, the <a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html" title="I2CCC26XX Hardware attributes. ">I2CCC26XX_HWAttrs</a> pin mapping will be used. </p>
<div class="fragment"><div class="line">*  <a class="code" href="struct_i2_c___config.html">I2C_Handle</a> handle;</div>
<div class="line">*  <a class="code" href="struct_i2_c___params.html">I2C_Params</a> i2cParams;</div>
<div class="line">*  <a class="code" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html">I2CCC26XX_I2CPinCfg</a> pinCfg;</div>
<div class="line">*</div>
<div class="line">*  <a class="code" href="_i2_c_8h.html#ab11636302074d67180207ab81ceb323c">I2C_Params_init</a>(&amp;i2cParams);     <span class="comment">// sets custom to NULL</span></div>
<div class="line">*  pinCfg.<a class="code" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html#a07155d4bf6fac9ed7181eca65563e2c9">pinSDA</a> = Board_I2C0_SDA1;</div>
<div class="line">*  pinCfg.<a class="code" href="struct_i2_c_c_c26_x_x___i2_c_pin_cfg.html#af6a6d421ac74746b80065a3e9de338d6">pinSCL</a> = Board_I2C0_SCL1;</div>
<div class="line">*  i2cParams.<a class="code" href="struct_i2_c___params.html#a2416cc06d853e6cc24e1f294dfebb194">custom</a> = &amp;pinCfg;</div>
<div class="line">*</div>
<div class="line">*  handle = <a class="code" href="_i2_c_8h.html#ae1aa99e1fee4517406018e10025cca0e">I2C_open</a>(Board_I2C, &amp;i2cParams);</div>
<div class="line">*  </div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ab3c00c0267b7eb96f1459bfb823bdd79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html">I2CCC26XX_HWAttrs</a>  <a class="el" href="struct_i2_c_c_c26_x_x___h_w_attrs.html">I2CCC26XX_HWAttrs</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2CCC26XX Hardware attributes. </p>
<p>These fields are used by driverlib APIs and therefore must be populated by driverlib macro definitions. For cc26xxware these definitions are found in:</p>
<ul>
<li>inc/hw_memmap.h</li>
<li>inc/hw_ints.h</li>
</ul>
<p>A sample structure is shown below: </p>
<div class="fragment"><div class="line">*  <span class="keyword">const</span> <a class="code" href="struct_i2_c_c_c26_x_x___h_w_attrs.html">I2CCC26XX_HWAttrs</a> i2cCC26XXHWAttrs[] = {</div>
<div class="line">*      {</div>
<div class="line">*         .<a class="code" href="struct_i2_c_c_c26_x_x___h_w_attrs.html#a45cbf1a9044afdd06f0aa82319c977ef">baseAddr</a> = I2C0_BASE,</div>
<div class="line">*         .intNum = INT_I2C,</div>
<div class="line">*         .powerMngrId = PERIPH_I2C0,</div>
<div class="line">*         .sdaPin = Board_I2C_SDA,</div>
<div class="line">*         .sclPin = Board_I2C_SCL,</div>
<div class="line">*      },</div>
<div class="line">*  };</div>
<div class="line">*  </div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a0eb1b66d08f9584c404d1610f8282394"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_i2_c_c_c26_x_x___object.html">I2CCC26XX_Object</a>  <a class="el" href="struct_i2_c_c_c26_x_x___object.html">I2CCC26XX_Object</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2CCC26XX Object. </p>
<p>The application must not access any member variables of this structure! </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6fb66ad0052e9ab9d1c1b65b8276fc61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_i2_c___fxn_table.html">I2C_FxnTable</a> I2CCC26XX_fxnTable</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><small>
Copyright  2015, Texas Instruments Incorporated
</small>
</body>
</html>
